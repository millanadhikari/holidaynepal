import {useState, useEffect} from 'react'



const Useform =(callback,Validateinfo) =>{
   const [values, setValues] = useState({
       username:'',
       email:'',
       password:'',
       password2:''

   })

   const [errors, seterrors] = useState({})
   const [submitting, setSubmitting] = useState(false)

   const handlechange =e=>{
       const {name, value} = e.target
       setValues({
           ...values,
           [name]: value
       });
   };
   const handlesubmit =e =>{
       e.preventDefault();
       seterrors(Validateinfo(values));
       setSubmitting(true)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
   };
   console.log(values)
   useEffect(() => {
       if(Object.keys(errors).length ===0 && submitting){
         callback();  
       }
    },[errors]
    );
       
   
   return{ handlechange,handlesubmit, values, errors}
 
}; 
export default Useform;